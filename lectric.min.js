(function(g){var i={},d={},k=navigator.userAgent.toLowerCase();d.isWebkit=k.indexOf("applewebkit/")>-1;try{document.createEvent("TouchEvent");d.supportsTouch=true}catch(l){d.supportsTouch=false}i.Browser=d;var j=function(){this.hooks=[]};j.prototype.push=function(a,b){if(this.hooks[a]===undefined)this.hooks[a]=[];this.hooks[a].push(b)};j.prototype.invoke=function(a){if(this.hooks[a]!==undefined){var b=[].slice.call(arguments),f=this;jQuery.each(this.hooks[a],function(c,h){h.apply(f,b.slice(1))})}};
d=function(){};d.prototype.init=function(a,b){this.opts=jQuery.extend({next:undefined,previous:undefined,limitLeft:false,limitRight:false,init:undefined},b);this.currentY=this.currentX=0;this.hooks=new j;var f=$(a);f.find(".item").wrapAll('<div class="items">');f.css("overflow","hidden");this.element=f.find(".items");this.element.css("width","1000000px");this.element.find(".item").css("float","left");this.structure=this.structure(this.element);var c=this;this.opts.next&&$(this.opts.next).bind("click",
function(){var h=c.currentX;c.currentX=c.limitXBounds(c.nextPageX(c.currentX));c.currentX!==h&&c.update();return false});this.opts.previous&&$(this.opts.previous).bind("click",function(){var h=c.currentX;c.currentX=c.limitXBounds(c.previousPageX(c.currentX));if(c.currentX!==h){c.update();c.hooks.invoke("move",c)}return false});this.opts.init!==undefined&&this.opts.init(this)};d.prototype.update=function(a){a=jQuery.extend({animate:true,invokeMove:true},a||{});var b=this,f=function(){b.hooks.invoke("animationEnd",
b);$(this).dequeue()};a.animate?this.element.animate({"margin-left":this.currentX+"px"}).queue(f):this.element.css({"margin-left":this.currentX+"px"}).queue(f);a.invokeMove&&this.hooks.invoke("move",this)};d.prototype.subscribe=function(a,b){return this.hooks.push(a,b)};d.prototype.structure=function(a){var b={},f=function(){return a.find(".item").eq(0)};b.itemCount=function(){return a.find(".item").size()};b.itemHeight=function(){return parseInt(f().height())};b.itemSpacing=function(){var c=f().css("marginRight");
return c!==undefined?parseInt(c.replace("px","")):0};b.itemWidth=function(){return b.itemSpacing()+parseInt(f().width())};return b};d.prototype.page=function(a){return Math.abs(Math.round(a/this.structure.itemWidth()))};d.prototype.nearestPageX=function(a){return Math.round(a/this.structure.itemWidth())*this.structure.itemWidth()};d.prototype.pageX=function(a){return(this.opts.reverse?1:-1)*a*this.structure.itemWidth()};d.prototype.nextPageX=function(a){if(this.page(a)+1<=this.structure.itemCount()-
1)a-=this.structure.itemWidth();return a};d.prototype.previousPageX=function(a){if(this.page(a)>=0)a+=this.structure.itemWidth();return a};d.prototype.limitXBounds=function(a){var b=this.structure.itemWidth()*this.structure.itemCount();if(this.opts.reverse){a=a>b-this.structure.itemWidth()?b-this.structure.itemWidth():a;a=a<0?0:a}else{a=a<-b+this.structure.itemWidth()?-b+this.structure.itemWidth():a;a=a>0?0:a}if(this.currentX-a>0&&this.opts.limitRight||this.currentX-a<0&&this.opts.limitLeft)a=this.currentX;
return a};var e=function(){};e.prototype=new d;e.superobject=d.prototype;e.prototype.init=function(a,b,f){e.superobject.init.call(this,a,b,f);this.gesturing=false;a=$(a);a[0].addEventListener("touchstart",this,false);a[0].addEventListener("webkitTransitionEnd",this,false)};e.prototype.update=function(a){a=jQuery.extend({animate:true,invokeMove:true},a||{});a.animate&&this.decayOn();this.element.css({"-webkit-transform":"translate3d("+this.currentX+"px, 0, 0)"});a.invokeMove&&this.hooks.invoke("move",
this)};e.prototype.handleEvent=function(a){this[a.type](a)};e.prototype.click=function(a){this.moved&&a.preventDefault();this.element[0].removeEventListener("click",this,false);return false};e.prototype.touchstart=function(a){this.currentTarget=a.currentTarget;this.startX=a.touches[0].pageX-this.currentX;this.startY=a.touches[0].pageY-this.currentY;this.moved=false;g.addEventListener("gesturestart",this,false);g.addEventListener("gestureend",this,false);g.addEventListener("touchmove",this,false);
g.addEventListener("touchend",this,false);this.element[0].addEventListener("click",this,false);this.decayOff();this.hooks.invoke("start",this)};e.prototype.touchmove=function(a){if(this.gesturing)return false;if(!this.moved){Math.abs(a.touches[0].pageY-this.startY)<15&&a.preventDefault();this.hooks.invoke("firstMove",this)}this.moved=true;this.lastX=this.currentX;this.lastMoveTime=new Date;this.currentX=this.limitXBounds(a.touches[0].pageX-this.startX);this.update()};e.prototype.touchend=function(){g.removeEventListener("gesturestart",
this,false);g.removeEventListener("gestureend",this,false);g.removeEventListener("touchmove",this,false);g.removeEventListener("touchend",this,false);if(this.moved){this.currentX=this.nearestPageX(this.limitXBounds(this.currentX+(this.currentX-this.lastX)*100/(new Date-this.lastMoveTime+1)));this.update();this.hooks.invoke("end",this)}else this.hooks.invoke("endNoMove",this);this.currentTarget=undefined};e.prototype.webkitTransitionEnd=function(){this.hooks.invoke("animationEnd",this)};e.prototype.gesturestart=
function(){this.gesturing=true};e.prototype.gestureend=function(){this.gesturing=false};e.prototype.decayOff=function(){this.element.css({"-webkit-transition-duration":"0s"});this.element.css({"-webkit-transition-property":"none"})};e.prototype.decayOn=function(){this.element.css({"-webkit-transition-duration":"0.4s"});this.element.css({"-webkit-transition-property":"-webkit-transform"})};i.Slider=d;i.TouchSlider=e;g.Lectric=i})(window);
